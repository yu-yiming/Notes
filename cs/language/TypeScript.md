# TypeScript 学习

**TypeScript** （以下简称 **TS**）是一个建立在 **JavaScript** （以下简称 **JS** ）上的强类型语言。经过编译，它会变为等效的 **JS** 源码。虽然编译需要时间，但是强类型带来的安全性是无可替代的。本篇中，我们会将两者一起介绍，因为本质上前者是后者的超集。

## 类型

### 变量定义

**JS** 是一个动态语言，其中的变量类型都是运行时才做检查；即使如此，我们也能为变量（以及其绑定的对象）进行类型区分，主要有以下几种：

- 字符串 `string`：一串字符组成的对象，比如 `"Hello, World!"`。
- 数字 `number`：一个数学量，比如 `123`、`1.23`。**JS** 中没有其它一些语言中整数和浮点数的区分。
- 布尔类型 `boolean`：一个布尔值，`true` 或 `false`。
- 数组类型 `type[]`：一组通类型对象组成的对象，如 `[1, 2.0, 33]` 是 `number[]` 类型的对象。

在 **JS** 中，我们不需要声明变量的类型，且可以将任意类型的值赋给同一个变量：

```javascript
var x = 123
var str = "abc"
var arr = [1, 2, 3]
arr = 10
```

在 **TS** 中，我们同样不需要声明变量的类型，但一个变量在定义后，就不能变更其类型了：

```typescript
var x = 123
x = [1, 2, 3]	// 错误
```

这是因为在定义处，**TS** 会默认将类型声明补上：

```typescript
var x : number = 123
```

如果我们希望达到 **JS** 那样的弱类型效果，可以使用 `any` 类型显式声明变量：

```typescript
var x : any = 123
x = [1, 2, 3]
```

事实上，后文中如果我们把所有类型标识都改为 `any` 或省略时，**TS** 就“退化”成了 **JS**，类型安全都要程序员来保证了。

**JS** 中有三种变量声明关键字，除了上面介绍的 `var` 外，还有 `let` 和 `const`。他们的特征如下：

- `var` 声明的变量具有“函数作用域”，它在不同函数中可以有不同定义，但在同一函数中不区分块作用域（比如 `if` 语句等），一经声明在整个函数中都有效。同时，`var` 声明的变量允许在函数多个地方重复声明。
- `let` 声明的变量具有“块作用域”，它的定义只在当前块中生效。同时，同一个块作用域中用 `let` 声明的变量只能被声明一次。
- `const` 声明的变量和 `let` 性质类似，但它绑定的对象不能修改，即初始化后不能让它绑定另一个对象，但可以修改它的属性。这有点像 **C/C++** 中的 `const *`（而不是 `* const`）。

### 函数

